install.packages(ṕacman)
install.packages(`pacman`)
install.packages('pacman')
pacman::p_load(raster, glcm)
if (!require("pacman")) install.packages("pacman")
pacman::p_load(raster, glcm)
library(pacman)
install.packages("pacman")
pacman::p_load(raster, glcm)
?spatial.tools
pacman::p_load(spatial.tools)
?beginCluster
tempdir()
mydir <- ('/media/sarvision/InternshipFilesAraza/BiomassPhilippines') #just change if working with Windows
setwd(mydir)
#texture
intr.files <- list.files(paste0(mydir, '/temp'),pattern='.tif')
setwd(paste0(mydir, '/temp'))
l.intr <- stack(intr.files[[9]])
p.intr <- stack(intr.files[[12]])
s.intr <- stack(intr.files[[15]])
## Create and stack other covariates(vegetation indices, polarization ratios, slope from DEM, and NA-free land cover)
#vegetation indices, and dual-pol ratio
setwd(paste0(mydir,'/scripts/'))
source('a_VIs_ratios.R')
l.intr <- stack(intr.files[[9]])
#texture
intr.files <- list.files(paste0(mydir, '/temp'),pattern='.tif')
setwd(paste0(mydir, '/temp'))
l.intr <- stack(intr.files[[9]])
intr.files
setwd(paste0(mydir, '/temp'))
l.intr <- stack(intr.files[[11]])
p.intr <- stack(intr.files[[15]])
s.intr <- stack(intr.files[[18]])
r.list.msk <- list (l.intr,p.intr,s.intr)
n.list.msk <- c('l_tex_mask', 'p_tex_mask', 's_tex_mask')
setwd(paste0(mydir,'/scripts/'))
source('a_texture1.R')
all.tex <- TexProd1 (r.list.msk, 9, n.list.msk)
?glcm
library(glcm)
?glcm
all.tex <- TexProd1 (r.list.msk, 15, n.list.msk)
all.tex <- TexProd1 (r.list.msk, 3, n.list.msk)
source('a_texture1.R')
all.tex <- TexProd1 (r.list.msk, 3, n.list.msk)
setwd(paste0(mydir,'/scripts/'))
source('a_openfiles.R')
#Open stand alone rasters - DEM and Land Cover
RasFiles <- FolderFiles ('raw', 'tif')
LcovFiles <- list.files(RasFiles[2])
setwd(RasFiles[2])
lcov <- raster(LcovFiles[2])
#Open "satellite rasters"
RasFiles <- FolderFiles ('intermediate', 'tif')
#Stack each main input (landsat, palsar, sentinel1)
landsat <- stack(RasFiles[[3]])
names(landsat) <- c("red" ,  "nir",   "swir1", "swir2")
palsar <- stack(RasFiles[[6]])
names(palsar) <- c('hh1', 'hv1', 'hh2', 'hv2')
s1 <- stack(RasFiles[[5]])
names(s1) <- c('min.vh', 'min.vv', 'mean.vh', 'mean.vv', 'max.vh', 'max.vv', 'sd.vh',
'sd.vv', 'range.vh', 'range.vv', 'variab.vh', 'variab.vv')
dem <- raster(RasFiles[1])
s1 <- subset(s1, order(c(1,3,2,4,5,6,7,8,9,10,11))) #re-arrange layer so all texture source band in layer 2
s1
r.list <- list (landsat,palsar,s1)
n.list <- c('ĺ.tex', 'p.tex', 's.tex')
#texture
source('a_texture1.R')
## Create and stack other covariates(vegetation indices, polarization ratios, slope from DEM, and NA-free land cover)
#vegetation indices, and dual-pol ratio
setwd(paste0(mydir,'/scripts/'))
#texture
source('a_texture1.R')
n.list <- c('ĺ.tex', 'p.tex', 's.tex')
r.list <- list (landsat,palsar,s1)
TexProd1 (r.list, 3, n.list)
closeAllConnections()
#texture
source('a_texture1.R')
TexProd1 (r.list, 3, n.list)
#texture
source('a_texture1.R')
asdf <- TexProd1 (r.list, 3, n.list)
setwd(paste0(mydir,'/scripts/'))
source('zz_test_mask.R')
t.list <- list(landsat,palsar,s1,dem,lcov)
n.list <- c('landsat','palsar','s1','dem','lcov')
t.mask <- MaskForTestPar1(t.list, n.list)
## Use test masks (***OPTIONAL***)
setwd(paste0(mydir,'/scripts/'))
source('zz_test_mask.R')
closeAllConnections()
source('zz_test_mask.R')
t.list <- list(landsat,palsar,s1,dem,lcov)
n.list <- c('landsat','palsar','s1','dem','lcov')
t.mask <- MaskForTestPar1(t.list, n.list)
#texture
source('a_texture1.R')
asdf <- TexProd1 (r.list, 3, n.list)
closeAllConnections()
stopCluster(cl)
closeAllConnections()
closeAllConnections()
stopCluster(cl)
UseCores <- length(t.list)
cl<- makeSOCKcluster(UseCores)
registerDoSNOW(cl)
stopCluster(cl)
closeAllConnections()
